% !TEX TS-program = xelatex
% !TEX encoding = UTF-8

%to magnify the whole document?
%\mag=5400

\documentclass[11pt]{book}

\usepackage{fontspec} % Font selection for XeLaTeX; see fontspec.pdf for documentation
\defaultfontfeatures{Mapping=tex-text, Language=Sanskrit} % to support TeX conventions like ``---''
\usepackage{xunicode} % Unicode support for LaTeX character names (accents, European chars, etc)
% The polyglossia package lets us easily use several languages.
\usepackage{polyglossia}

%\newfontfamily\devanagarifont[Script=Devanagari]{Pedantic Indic}

%\newfontfamily\devanagarifont[Script=Devanagari]{Sahadeva}

%\newfontfamily\devanagarifont[Scale=1.6,Script=Devanagari]{AdishilaDev}

%\newfontfamily\devanagarifont[Scale=1.3,Script=Devanagari]{DevanagariMT}
%\newfontfamily\devanagarifontbold[Scale=1.3,Script=Devanagari]{DevanagariMT}

%\newfontfamily\devanagarifont[Scale=1.3,Script=Devanagari]{Arial Unicode MS}
%\newfontfamily\devanagarifontbold[Scale=1.3,Script=Devanagari]{Arial Unicode MS}

%\newfontfamily\devanagarifont[Scale=1.3,Script=Devanagari]{Lohit Devanagari}
%\newfontfamily\devanagarifontbold[Scale=1.3,Script=Devanagari]{Lohit Devanagari}

%\newfontfamily\devanagarifont[Scale=1,Script=Devanagari]{Shobhika-Regular}
%\newfontfamily\devanagarifontbold[Scale=1,Script=Devanagari]{Shobhika-Bold}

% https://github.com/chchch/PedanticIndic/tree/master/PedanticDevanagari
%\newfontfamily\devanagarifont[Scale=1.4,Script=Devanagari, LetterSpace={1}]{PedanticDevanagariLight}
%\newfontfamily\devanagarifontbold[Scale=1.4,Script=Devanagari]{PedanticDevanagariBold}
% FontForge: fixed lū kerning in PedanticDevanagariLight, save as .otf (TrueType (CFF))

\newfontfamily\devanagarifont[Scale=1.4,Script=Devanagari, LetterSpace={1}]{Sanskrit2003}
\newfontfamily\devanagarifontsmall[Scale=1.2,Script=Devanagari]{Sanskrit2003}
\newfontfamily\devanagarifontbold[Scale=1.4,Script=Devanagari]{Sanskrit2003}

%\newfontfamily\devanagarifont[Scale=1.4,Script=Devanagari, LetterSpace={1}]{Noto Sans Newa}
%\newfontfamily\devanagarifontsmall[Scale=1.2,Script=Devanagari]{Noto Sans Newa}
%\newfontfamily\devanagarifontbold[Scale=1.4,Script=Devanagari]{Noto Sans Newa}

\newfontfamily\englishfont[Scale=1.2,Script=Latin]{EB Garamond}
%\setmainfont[Script=Devanagari]{AdishilaDev}
\setmainlanguage{sanskrit}
%\setotherlanguages{sanskrit}
\usepackage{xltxtra} % Extra customizations for XeLaTeX
%\setsansfont{Deja Vu Sans}
%\setmonofont{Deja Vu Mono}

%%%%%%%%%%%%%%%%%%%%%%%%%%
% Devanagari page numbers!
% from https://imathworks.com/tex/tex-latex-xelatex-devanagari-page-numbers-in-tableofcontents/
\usepackage{xstring}
\renewcommand\thepage{\Devnag{page}}
\DeclareRobustCommand\Devnag[1]{\expandafter\arabictodevnag\expandafter{\the\csname c@#1\endcsname}}
\newcommand{\arabictodevnag}[1]%
{%
  \StrSubstitute{#1}{0}{०}[\num]
  \StrSubstitute{\num}{1}{१}[\num]
  \StrSubstitute{\num}{2}{२}[\num]
  \StrSubstitute{\num}{3}{३}[\num]
  \StrSubstitute{\num}{4}{४}[\num]
  \StrSubstitute{\num}{5}{५}[\num]
  \StrSubstitute{\num}{6}{६}[\num]
  \StrSubstitute{\num}{7}{७}[\num]
  \StrSubstitute{\num}{8}{८}[\num]
  \StrSubstitute{\num}{9}{९}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\usepackage[total={11.7cm,20cm},top=4cm, left=5cm, headsep=1.1cm, footskip=1.7cm, footnotesep=1cm]{geometry}
%\baselineskip1em


\input{/home/csaba/indology/dharma_project/vrsa_edition/vrsasara_macros_devnag_xelatex.tex}
% The above contains these line for EXTERNAL files
%\input{vrsasara_ed_devnag_xelatex_macros_sigla.tex}
%\input{vrsasara_ed_devnag_xelatex_macros_ledmac.tex}
%\input{vrsasara_ed_devnag_xelatex_macros_authors.tex}


\begin{document}

% ADJUST PAGE NUMBER for EDITION ! 
\setcounter{page}{500}

\fancyhead[CO]{{\footnotesize\devanagarifont वृषसारसंग्रहे }}
\fancyhead[CE]{{\footnotesize\devanagarifont प्रथमो ऽध्यायः  }}
\fancyhead[LE]{}
\fancyhead[RE]{}
\fancyhead[LO]{}
\fancyhead[RO]{}

% input the main edition file generated separately with Python
\input{/home/csaba/indology/dharma_project/vrsa_edition/vrsasara_input_devnag_xelatex.tex}

\pend\endnumbering
\end{document}

